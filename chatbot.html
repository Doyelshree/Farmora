<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Farmora</title>
    <meta name="description" content="" />
    <meta name="keywords" content="" />

     

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;1,300;1,400;1,500;1,600;1,700;1,800&family=Marcellus:wght@400&display=swap"
      rel="stylesheet"
    />

    <!-- Vendor CSS Files -->
    <link
      href="assets/vendor/bootstrap/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="assets/vendor/bootstrap-icons/bootstrap-icons.css"
      rel="stylesheet"
    />
    <link href="assets/vendor/aos/aos.css" rel="stylesheet" />
    <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet" />
    <link
      href="assets/vendor/glightbox/css/glightbox.min.css"
      rel="stylesheet"
    />

    <script src="assets/vendor/aos/aos.js"></script>

    <!-- Main CSS File -->
    <link href="assets/css/main.css" rel="stylesheet" />

    <!-- =======================================================
  * Template Name: AgriCulture
  * Template URL: https://bootstrapmade.com/agriculture-bootstrap-website-template/
  * Updated: Aug 07 2024 with Bootstrap v5.3.3
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
  <style>
     

    .chat-container {
      width: 100%;
      max-width: 450px;
      background-color: #fff;
      color: #f9f9f9;
      border-radius: 12px;
      box-shadow: 0 2px 15px rgba(0, 0, 0, 0.1);
      overflow: hidden;
      display: flex;
      flex-direction: column;
      height: 65vh;
      margin: auto;
    }

    .chat-header {
      background-color: #116530;
      color: #fff;
      padding: 20px;
      text-align: center;
      border-bottom: 1px solid #a3b18a;
    }

    .chat-header h1 {
      margin: 0;
      font-size: 1.75rem;
      font-weight: 500;
      color: #ffffff;
    }

    .chat-messages {
      flex-grow: 1;
      padding: 25px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
    }

    .message {
      display: flex;
      align-items: flex-start;
      margin-bottom: 18px;
    }

    .message-content {
      padding: 12px 15px;
      border-radius: 8px;
      max-width: 75%;
      word-break: break-word;
    }

    .user-message {
      flex-direction: row-reverse;
    }

    .user-message .message-content {
      background-color: #e0f2e9;
      color: #116530;
      margin-right: 10px;
    }

    .bot-message .message-content {
      background-color: #f0ead6;
      color: #3d405b;
      margin-left: 10px;
    }

    .profile-image {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      object-fit: cover;
      margin-top: 5px;
    }

    .user-message .profile-image {
      margin-left: 10px;
    }

    .bot-message .profile-image {
      margin-right: 10px;
    }

    .chat-input-container {
      display: flex;
      padding: 15px 20px;
      background-color: #f9f9f9;
      border-top: 1px solid #e0e0e0;
    }

    #user-input {
      flex-grow: 1;
      padding: 12px;
      border: 1px solid #a3b18a;
      border-radius: 8px;
      font-size: 1rem;
      background-color: #fff;
      color: #3d405b;
      outline: none;
    }

    #send-button {
      padding: 12px 24px;
      background-color: #116530;
      color: #fff;
      border: none;
      border-radius: 8px;
      margin-left: 15px;
      cursor: pointer;
      font-size: 1rem;
      transition: background-color 0.3s ease;
    }

    #send-button:hover {
      background-color: #168840;
    }

    #send-button:disabled {
      background-color: #d3d3d3;
      cursor: not-allowed;
      color: #777;
    }

    @media (max-width: 600px) {
      .chat-container {
        border-radius: 0;
        height: 100vh;
        max-width: 100%;
      }
    }
  </style>
  </head>

  <body class="services-page">
    <header id="header" class="header d-flex align-items-center position-relative">
      <div class="container-fluid container-xl position-relative d-flex align-items-center justify-content-between">
  
        <a href="index.html" class="logo d-flex align-items-center">
          <!-- Uncomment the line below if you also wish to use an image logo -->
          <img src="assets\img\svgviewer-output.svg" alt="Farmora">
          <!-- <h1 class="sitename">AgriCulture</h1>  -->
        </a>
  
        <nav id="navmenu" class="navmenu">
          <ul>
            <li><a href="index.html" >Home</a></li>
            
            <li><a href="services.html">Our Services</a></li>
            <li><a href="gallery.html">Gallery</a></li>
            <li><a href="contact.html">Contact</a></li>
            <li><a href="about.html">About Us</a></li>
            <li><a href="chatbot.html" class="active">Dr.Farmora</a></li>
          </ul>
          <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
        </nav>
  
      </div>
    </header>

    <div class="page-title dark-background" data-aos="fade" style="background-image: url(assets/img/page-title-bg.webp);  height: 30px; background-size: cover; display: flex; justify-content: center; align-items: center; text-align: center;">
        <div class="container position-relative">
          <h1>Dr.Farmora</h1>
          <nav class="breadcrumbs">
            <ol>
              <li><a href="index.html">Home</a></li>
              <li class="current">Dr.Farmora</li>
            </ol>
          </nav>
        </div>
      </div><!-- End Page Title -->

      <main style="flex: 1;">
 
        <div class="chat-container mt-4 mb-4">
          <div class="chat-header">
            <h1>Dr.Farmora</h1>
          </div>
          <div class="chat-messages" id="chat-messages"></div>
          <div class="chat-input-container">
            <input type="text" id="user-input" placeholder=" Please Type your message here..." />
            <button id="send-button">Send</button>
          </div>
        </div>
      </main>

     
      <footer id="footer" class="footer dark-background">

        <div class="footer-top">
          <div class="container">
            <div class="row gy-4">
              <div class="col-lg-4 col-md-6 footer-about">
                <a href="index.html" class="logo d-flex align-items-center">
                  <span class="sitename">Farmora</span>
                </a>
                
                  <div class="footer-contact pt-3">
                    <p>EM-4/1, Sector-V</p>
                    <p>Salt Lake, Kolkata-700091</p>
                    <p class="mt-3"><strong>Phone:</strong> <span>033-23575683</span></p>
                    <p><strong>Email:</strong> <span>info@ticollege.ac.in</span></p>
                  </div>
              </div>
    
              <div class="col-lg-2 col-md-3 footer-links" style="margin-left: auto; text-align: right;">
                <h4>Useful Links</h4>
                <ul>
                  <li><a href="#">Home</a></li>
                  
                  <li><a href="services.html">Services</a></li>
                  <li><a href="gallery.html">Gallery</a></li>
                  <li><a href="contact.html">Contact Us</a></li>
                  <li><a href="about.html">About us</a></li>
                  <li><a href="chatbot.html">Dr.Farmora</a></li>
                  
                </ul>
              </div>
              
              <div class="col-lg-2 col-md-3 footer-links" style="margin-left: auto; text-align: right;">
                <h4>Our Services</h4>
                <ul>
                  <li><a href="dis_dia.html">Disease Diagnosis</a></li>
                  <li><a href="prevention.html">Personalized Treatment</a></li>
                  <li><a href="crop.html">Crop Health Prediction</a></li>
                  <li><a href="fertilizer.html">Fertilizer Recommendation</a></li>
                </ul>
              </div>
            </div>
          </div>
        </div>
    
        <div class="copyright text-center">
          <div class="container d-flex flex-column flex-lg-row justify-content-center justify-content-lg-between align-items-center">
    
            <div class="d-flex flex-column align-items-center align-items-lg-start">
              <div>
                Â© Copyright <strong><span>FarMora</span></strong>. All Rights Reserved
              </div>
              <div class="credits">
                <!-- All the links in the footer should remain intact. -->
                <!-- You can delete the links only if you purchased the pro version. -->
                <!-- Licensing information: https://bootstrapmade.com/license/ -->
                <!-- Purchase the pro version with working PHP/AJAX contact form: https://bootstrapmade.com/herobiz-bootstrap-business-template/ -->
                
              </div>
            </div>
    
            <div class="social-links order-first order-lg-last mb-3 mb-lg-0">
              <a href=""><i class="bi bi-twitter-x"></i></a>
              <a href=""><i class="bi bi-facebook"></i></a>
              <a href=""><i class="bi bi-instagram"></i></a>
              <a href=""><i class="bi bi-linkedin"></i></a>
            </div>
    
          </div>
        </div>
    
      </footer>
  </body>

  <script>
    const API_KEY = 'AIzaSyAw5791CsEJ1eq1FrzwtiEcJCmafdWdzI4';
    const API_URL = 'https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent';

    const chatMessages = document.getElementById('chat-messages');
    const userInput = document.getElementById('user-input');
    const sendButton = document.getElementById('send-button');

    async function generateResponse(prompt) {
      const response = await fetch(`${API_URL}?key=${API_KEY}`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] })
      });
      if (!response.ok) throw new Error('Failed to generate response');
      const data = await response.json();
      return data.candidates[0].content.parts[0].text;
    }

    function cleanMarkdown(text) {
      return text.replace(/#{1,6}\s?/g, '').replace(/\*\*/g, '').replace(/\n{3,}/g, '\n\n').trim();
    }

    function addMessage(message, isUser) {
      const messageElement = document.createElement('div');
      messageElement.classList.add('message', isUser ? 'user-message' : 'bot-message');
      const profileImage = document.createElement('img');
      profileImage.classList.add('profile-image');
      profileImage.src = isUser ? 'user.jpg' : 'bot.jpg';
      profileImage.alt = isUser ? 'User' : 'Bot';
      const messageContent = document.createElement('div');
      messageContent.classList.add('message-content');
      messageContent.textContent = message;
      messageElement.appendChild(profileImage);
      messageElement.appendChild(messageContent);
      chatMessages.appendChild(messageElement);
      chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    async function handleUserInput() {
      const userMessage = userInput.value.trim();
      if (userMessage) {
        addMessage(userMessage, true);
        userInput.value = '';
        sendButton.disabled = true;
        userInput.disabled = true;
        try {
          const botMessage = await generateResponse(userMessage);
          addMessage(cleanMarkdown(botMessage), false);
        } catch (error) {
          console.error('Error:', error);
          addMessage('Sorry, I encountered an error. Please try again.', false);
        } finally {
          sendButton.disabled = false;
          userInput.disabled = false;
          userInput.focus();
        }
      }
    }

    sendButton.addEventListener('click', handleUserInput);
    userInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        handleUserInput();
      }
    });
  </script>
</html>

<script>
    AOS.init();
</script>
